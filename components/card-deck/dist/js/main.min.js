!function(t){function e(n){if(r[n])return r[n].exports;var s=r[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function(){function t(e){var s=e.element;n(this,t),this.root=s,this.cards=[].concat(r(this.root.querySelectorAll(".cd-card"))),this.onStart=this.onStart.bind(this),this.onMove=this.onMove.bind(this),this.onEnd=this.onEnd.bind(this),this.update=this.update.bind(this),this.targetBCR=null,this.target=null,this.startX=0,this.currentX=0,this.screenX=0,this.targetX=0,this.draggingCard=!1,this.addEventListeners(),this.scatterCards(),requestAnimationFrame(this.update)}return s(t,[{key:"scatterCards",value:function(){this.cards.forEach(function(t){var e=Math.round(4*Math.random()-2);t.style.transform="rotateZ("+e+"deg)"})}},{key:"addEventListeners",value:function(){this.root.addEventListener("touchstart",this.onStart),this.root.addEventListener("touchmove",this.onMove),this.root.addEventListener("touchend",this.onEnd),this.root.addEventListener("touchcancel",this.onEnd),this.root.addEventListener("mousedown",this.onStart),this.root.addEventListener("mousemove",this.onMove),this.root.addEventListener("mouseup",this.onEnd)}},{key:"onStart",value:function(t){this.target||t.target.classList.contains("cd-card")&&(this.target=t.target,this.targetBCR=this.target.getBoundingClientRect(),this.startX=t.pageX||t.touches[0].pageX,this.currentX=this.startX,this.draggingCard=!0,this.target.style.willChange="transform",t.preventDefault())}},{key:"onMove",value:function(t){this.target&&(void 0!==t.pageX?this.currentX=t.pageX:this.currentX=t.touches[0].pageX)}},{key:"onEnd",value:function(t){if(this.target){this.targetX=0;var e=this.currentX-this.startX;Math.abs(e)>.35*this.targetBCR.width&&(this.targetX=e>0?this.targetBCR.width:-this.targetBCR.width),this.draggingCard=!1}}},{key:"update",value:function(){if(requestAnimationFrame(this.update),this.target){this.draggingCard?this.screenX=this.currentX-this.startX:this.screenX+=(this.targetX-this.screenX)/4;var t=Math.abs(this.screenX)/this.targetBCR.width;if(this.target.style.transform="translateX("+this.screenX+"px)",!this.draggingCard){var e=Math.abs(this.screenX)<.1,r=1-Math.pow(t,3)<.01;if(r){if(!this.target||!this.target.parentNode)return;this.animateCardToTheEnd(this.target),this.resetTarget()}else e&&this.resetTarget()}}}},{key:"animateCardToTheEnd",value:function(t){var e=this.screenX<0?-this.targetBCR.width:this.targetBCR.width,r=Math.round(4*Math.random()-2),n=1;t.style.transition="transform 200ms ease-in",t.style.transform="translateX("+e+"px) scale(0.9)",t.addEventListener("transitionend",function s(){if(1===n)t.style.transition="transform 300ms ease-out",t.style.transform="translateX(0) scale(0.9) rotateZ("+r+"deg)",t.style.zIndex=0;else if(2===n){var e=t.parentNode;t.removeEventListener("transitionend",s),t.style.zIndex=1,t.style.transform="rotateZ("+r+"deg)",e.removeChild(t),e.insertBefore(t,e.firstChild)}n++})}},{key:"resetTarget",value:function(){this.target&&(this.target.style.willChange="initial",this.target=null)}}]),t}();window.CardDeck=i}]);